# Основы сетей. Часть 2 — «Прикладные подарки»
Аннотация: Данный отчет включает в себя продолжение разбора основ сетей, модели OSI/TCP/IP на примере работы в среде GNS3. А также статической маршрутизации, TCP/UDP, DNS, NTP, Telnet, SSH, DHCP.

## Содержание
   1. [Задание 1. Статическая маршрутизация](#задание-1-статическая-маршрутизация)
   2. [Задание 2. NTP](#задание-2-ntp)
   3. [Задание 3. DNS](#задание-3-dns)
   4. [Задание 4. DHCP](#задание-4-dhcp)
   5. [Задание 5. SSH](#задание-5-ssh)


### Задание 1. Статическая маршрутизация
Рабочая область GNS3:

![ex01](/src/misc/images/ex01_1.png)

#### Конфигурирование R1:

1.1.1 Показать все интерфейсы (понадобится на будущих этапах):
```
show ip interface brief
```

1.1.2 Вход в режим конфигурации маршрутизатора:
```
configure terminal
```

1.1.3 Вход в режим конфигурации интерфейса, подключенного к маршрутизатору R2:
```
interface FastEthernet0/0
```

1.1.4 Присвоение интерфейсу FastEthernet0/0 адреса и маски подсети:
```
ip address 10.10.10.1 255.255.255.0
```

1.1.5 Включение интерфейса для передачи данных:
```
no shutdown
```

1.1.6 Выход из конфигурации интерфейса FastEthernet0/0:
```
exit
```

1.1.7 Добавление статического маршрута в подсеть 10.10.20.0/24:
```
ip route 10.10.20.0 255.255.255.0 10.10.10.2
```

1.1.8 Выход из глобальной конфигурации:
```
exit
```

1.1.9 Сохранение конфигурации маршрутизатора:
```
copy running-config startup-config
```

#### Конфигурирование R2:

1.2.1 Показать все интерфейсы (понадобится на будущих этапах):
```
show ip interface brief
```

1.2.2 Вход в режим конфигурации маршрутизатора:
```
configure terminal
```

1.2.3 Вход в режим конфигурации интерфейса, подключенного к маршрутизатору R1:
```
interface FastEthernet0/0
```

1.2.4 Присвоение интерфейсу FastEthernet0/0 адреса и маски подсети:
```
ip address 10.10.10.2 255.255.255.0
```

1.2.5 Включение интерфейса для передачи данных:
```
no shutdown
```

1.2.6 Выход из конфигурации интерфейса FastEthernet0/0:
```
exit
```

1.2.7 Вход в режим конфигурации интерфейса, подключенного к маршрутизатору R3:
```
interface FastEthernet0/1
```

1.2.8 Присвоение интерфейсу FastEthernet0/1 адреса и маски подсети:
```
ip address 10.10.20.2 255.255.255.0
```

1.2.9 Включение интерфейса для передачи данных:
```
no shutdown
```

1.2.10 Выход из конфигурации интерфейса FastEthernet0/1:
```
exit
```

1.2.11 Выход из глобальной конфигурации:
```
exit
```

1.2.12 Сохранение конфигурации маршрутизатора:
```
copy running-config startup-config
```

#### Конфигурирование R3:

1.3.1 Показать все интерфейсы (понадобится на будущих этапах):
```
show ip interface brief
```

1.3.2 Вход в режим конфигурации маршрутизатора:
```
configure terminal
```

1.3.3 Вход в режим конфигурации интерфейса, подключенного к маршрутизатору R2:
```
interface FastEthernet0/0
```

1.3.4 Присвоение интерфейсу FastEthernet0/0 адреса и маски подсети:
```
ip address 10.10.20.1 255.255.255.0
```

1.3.5 Включение интерфейса для передачи данных:
```
no shutdown
```

1.3.6 Выход из конфигурации интерфейса FastEthernet0/0:
```
exit
```

1.3.7 Добавление статического маршрута в подсеть 10.10.10.0/24:
```
ip route 10.10.10.0 255.255.255.0 10.10.20.2
```

1.3.8 Выход из глобальной конфигурации:
```
exit
```

1.3.9 Сохранение конфигурации маршрутизатора:
```
copy running-config startup-config
```

#### Процесс конфигурирования R1:

![ex01](/src/misc/images/ex01_2.png)

#### Процесс конфигурирования R2:

![ex01](/src/misc/images/ex01_3.png)

#### Процесс конфигурирования R3:

![ex01](/src/misc/images/ex01_4.png)

#### Пинг с R1 на R3:

![ex01](/src/misc/images/ex01_5.png)

#### Пинг с R3 на R1:

![ex01](/src/misc/images/ex01_6.png)

### Задание 2. NTP

В качестве NTP сервера был выбран маршрутизатор R2. Так как R2 не имеет соединения с интернетом и используется в локальной сети - нет возможности синхронизации с внешним эталонным NTP сервером.
#### Конфигурирование R2:

2.1.1 Ручная настройка времени:

```
clock set 19:50:00 Dec 31 2024
```

2.1.2 Вывод текущего времени:
```
show clock
```

2.1.3 Вход в режим конфигурации маршрутизатора:
```
configure terminal
```

2.1.4 Включение NTP сервера с уровнем слоя 3:
```
ntp master 3
```

2.1.5 Выход из глобальной конфигурации:
```
exit
```

2.1.6 Проверка состояния NTP:
```
show ntp status
```

2.1.7 Сохранение конфигурации маршрутизатора:
```
copy running-config startup-config
```

#### Конфигурирование R1:

2.2.1 Настройка неверного времени (по сравнению с R2):
```
clock set 12:00:00 Jan 15 2025
```

2.2.2 Вход в режим конфигурации маршрутизатора:
```
configure terminal
```

2.2.3 Выбор NTP сервера:
```
ntp server 10.10.10.2
```

2.2.4 Выход из глобальной конфигурации:
```
exit
```

2.2.5 Вывод текущего времени:
```
show clock
```

2.2.6 Сохранение конфигурации маршрутизатора:
```
copy running-config startup-config
```

#### Процесс конфигурирования R2:

![ex02](/src/misc/images/ex02_1.png)

#### Процесс конфигурирования R1:

![ex02](/src/misc/images/ex02_2.png)

#### Процесс синхронизации времени на R1 с R2:

![ex02](/src/misc/images/ex02_3.png)

### Задание 3. DNS

В качестве DNS-сервера был выбран маршрутизатор R2, DNS клиента - R1. Для моделирования разрешения доменного имени в IP адрес необходимо сконфигурировать вышеупоямнутые маршрутизаторы.

#### Конфигурирование R2:

3.1.1 Вход в режим конфигурации маршрутизатора:
```
configure terminal
```

3.1.2 Создание loopback интерфейса:
```
interface loopback0
```

3.1.3 Назначение loopback интерфейсу IP-адреса 192.168.1.1/32:
```
ip address 192.168.1.1 255.255.255.255
```

3.1.4 Включение интерфейса для передачи данных:
```
no shutdown
```

3.1.5 Выход из конфигурации интерфейса loopback0:
```
exit
```

3.1.6 Включение dns-сервера:
```
ip dns server
```

3.1.7 Добавление dns записи my.site:
```
ip host my.site 192.168.1.1
```

3.1.8 Выход из глобальной конфигурации:
```
exit
```

3.1.9 Проверка добавления loopback интерфейса:
```
show ip interface brief
```

3.1.10 Проверка добавления dns записи:
```
show hosts
```

3.1.11 Сохранение конфигурации маршрутизатора:
```
copy running-config startup-config
```

#### Конфигурирование R1:

3.2.1 Вход в режим конфигурации маршрутизатора:
```
configure terminal
```

3.2.2 Разрешение преобразования доменных имен:
```
ip domain lookup
```

3.2.3 Указание IP адреса DNS сервера (R2):
```
ip name-server 10.10.10.2
```

3.2.4 Указание шлюза по умолчанию (R2):
```
ip route 0.0.0.0 0.0.0.0 10.10.10.2
```

3.2.5 Выход из глобальной конфигурации:
```
exit
```

3.2.6 Проверка выбранного DNS сервера:
```
show running-config | include ip name-server
```

3.2.7 Проверка разрешения доменного имени my.site:
```
ping my.site
```

3.2.8 Сохранение конфигурации маршрутизатора:
```
copy running-config startup-config
```

#### Процесс конфигурирования R2:

![ex03](/src/misc/images/ex03_1.png)

#### Процесс конфигурирования R1:

![ex03](/src/misc/images/ex03_2.png)

#### Процесс разрешения доменного имени my.site и работы утилиты ping:

![ex03](/src/misc/images/ex03_3.png)

### Задание 4. DHCP

В качестве DHCP сервера был выбран маршрутизатор R1, DHCP клиента - PC1. Для моделирования получения клиентом PC1 IP адреса от DHCP сервера необходимо сконфигурировать маршрутизатор R1.

Рабочая область GNS3:

![ex04](/src/misc/images/ex04_1.png)

#### Конфигурирование R1:

4.1.1 Показать все интерфейсы (понадобится на будущих этапах):
```
show ip interface brief
```

4.1.2 Вход в режим конфигурации маршрутизатора:
```
configure terminal
```

4.1.3 Вход в режим конфигурации интерфейса:
```
interface FastEthernet0/1
```

4.1.4 Присвоение интерфейсу FastEthernet0/1 адреса и маски подсети:
```
ip address 10.10.30.1 255.255.255.0
```

4.1.5 Включение интерфейса для передачи данных:
```
no shutdown
```

4.1.6 Выход из конфигурации интерфейса FastEthernet0/1:
```
exit
```

4.1.7 Создание пула DHCP адресов:
```
ip dhcp pool pool_1
```

4.1.8 Настройка диапазона выдаваемых адресов DHCP клиентам:
```
network 10.10.30.0 255.255.255.0
```

4.1.9 Настройка шлюза по умолчанию для DHCP клиентов:
```
default-router 10.10.30.1
```

4.1.10 Настройка DNS сервера для DHCP клиентов:
```
dns-server 10.10.10.2
```

4.1.11 Настройка времени аренды IP адресов DHCP клиентам (1 сутки):
```
lease 1 0 0
```

4.1.12 Выход из конфигурации DHCP сервера:
```
exit
```

4.1.13 Исключение части диапазона выдаваемых адресов:
```
ip dhcp excluded-address 10.10.30.1 10.10.30.100
```

4.1.14 Исключение части диапазона выдаваемых адресов:
```
ip dhcp excluded-address 10.10.30.151 10.10.30.255
```

4.1.15 Выход из глобальной конфигурации:
```
exit
```

4.1.16 Сохранение конфигурации маршрутизатора:
```
copy running-config startup-config
```

#### Конфигурирование PC1:

4.2.1 Запрос IP адреса:
```
ip dhcp
```

4.2.2 Использование утилиты ping на DHCP сервер (R1):
```
ping 10.10.30.1
```

#### Процесс конфигурирования R1:

![ex04](/src/misc/images/ex04_2.png)

#### Процесс конфигурирования PC1:

![ex04](/src/misc/images/ex04_3.png)

#### Процесс запроса IP адреса у DHCP сервера и работы утилиты ping:

![ex04](/src/misc/images/ex04_4.png)


### Задание 5. SSH

В качестве SSH сервера был выбран маршрутизатор R2, SSH клиента - R3. Для моделирования удаленного подключения по SSH к R2 с R3 необходимо сконфигурировать маршрутизатор R2.

#### Конфигурирование R2:

5.1.1 Вход в режим конфигурации маршрутизатора:
```
configure terminal
```

5.1.2 Выдача доменного имени:
```
ip domain-name CbS2_5.local
```

5.1.3 Генерация RSA ключа, длина ключа - 1024:
```
crypto key generate rsa
```

5.1.4 Создание пользователя:
```
username septicge password school21
```

5.1.5 Настройка виртуальных терминалов (3 подключения):
```
line vty 0 2
```

5.1.6 Указание использования локальных учетных записей для входа:
```
login local
```

5.1.7 Разрешение подключаться только через ssh:
```
transport input ssh
```

5.1.8 Выход из конфигурации виртуальных терминалов:
```
exit
```

5.1.9 Включение SSH версии 2:
```
ip ssh version 2
```

5.1.10 Выход из глобальной конфигурации:
```
exit
```

5.1.11 Сохранение конфигурации маршрутизатора:
```
copy running-config startup-config
```

#### Удаленное подключение с R3:

5.2.1 Проверка доступность порта 22 маршрутизатор R2 с помощью Telnet:
```
telnet 10.10.20.2 22
```

5.2.2 Удаленное подключение к R2:
```
ssh -l septicge 10.10.20.2
```

5.2.3 Закрытие удаленного подключения:
```
exit
```

#### Процесс конфигурирования R2:

![ex05](/src/misc/images/ex05_1.png)

#### Процесс удаленного подключения с R3:

![ex05](/src/misc/images/ex05_2.png)
