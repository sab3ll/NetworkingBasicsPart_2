# Основы сетей. Часть 2 — «Прикладные подарки»
Аннотация: Данный проект включает в себя продолжение разбора основ сетей, модели OSI/TCP/IP на примере работы в среде GNS3. А также статической маршрутизации, TCP/UDP, DNS, NTP, Telnet, SSH, DHCP.

1. [Задание 1. Статическая маршрутизация](#задание-1-статическая-маршрутизация)
2. [Задание 2. NTP](#задание-2-ntp)
3. [Задание 3. DNS](#задание-3-dns)
4. [Задание 4. DHCP](#задание-4-dhcp)
5. [Задание 5. SSH](#задание-5-ssh)

### Задание 1. Статическая маршрутизация
Для решения данного задания нужны знания в следующих темах: IP-адреса, 3 уровень OSI, GNS3, Wireshark.

Твое задание:

1. Для того чтобы освоить принципы работы статической маршрутизации, создай новый проект GNS3, добавь в него три сетевых устройства (используй образ Cisco 3745), для удобства назовем их R1, R2 и R3. Соедини их между собой так, чтобы они образовывали «цепочку» (R1-R2-R3).

2. Настрой сетевые интерфейсы, которыми соединены R1 и R2, используя адресацию из сети 10.10.10.0/24. Интерфейсы, которыми соединены R2 и R3, настрой, используя адресацию из другой сети с маской /24.

    Совет:
    - не назначай сетевым интерфейсам новых узлов «сложных» IP-адресов, используй простые, например, адресацию из сетей 10.10.10.0/24 и 10.10.20.0/24.

3. Сконфигурируй статические маршруты на устройстве R1 до сети между R2 и R3 и ответный маршрут на устройстве R3 до сети между R1 и R2.

4. Запусти сбор пакетной трассы, выполни команду ping до IP-интерфейса противоположного устройства (от R1 к R3 или наоборот), убедись в наличии ответного трафика.

5. В Wireshark изучи пакетную трассу и сохрани результирующий pcap-файл с именем «static».

В итоге загрузи в репозиторий два файла: проект с расширением .gns3 и pcap-файл с именем `static`. Дополнительно при выполнении этого задания рекомендуем самостоятельно изучить, каким образом определяется приоритет маршрута в таблице маршрутизации.

### Задание 2. NTP
Для решения данного задания нужны знания в следующих темах: NTP, Wireshark, GNS3.

Твое задание:
1. Для рассмотрения принципов работы NTP сконфигурируй на одном из устройств NTP-сервер.

2. На втором устройстве задай заведомо неверные значения текущего времени, запусти сбор трассы, укажи в качестве NTP-сервера устройство с настроенной службой NTP-сервера.

3. Убедись в том, что время успешно синхронизировалось с NTP-сервером.

4. Открой Wireshark и изучи результирующий файл пакетной трассы.

5. Ответь на вопросы:
- Какой протокол третьего уровня используется для взаимодействия между NTP-клиентом и NTP-сервером, какие source- и destination-порты при этом используются?
- Проверь передаваемое в первом NTP-пакете значение Transmit timestamp, запиши его.

6. Ответы запиши в текстовый файл с именем `ntp`.

7. В Wireshark сохрани результирующий pcap-файл с именем `ntp`.

В итоге загрузи в репозиторий файл проекта с расширением .gns3, текстовый файл с ответами с именем `ntp`, pcap-файл с именем `ntp`.

### Задание 3. DNS
Для решения данного задания нужны знания в следующих темах: DNS, FQDN, loopback интерфейс, Wireshark, GNS3.

Задание для рассмотрения принципов работы DNS:
1. Сконфигурируй на одном из устройств DNS-сервер, добавь в его конфигурации DNS-запись для сайта my.site.

2. На соседнем устройстве настрой использование узла с включенной службой DNS в качестве DNS-сервера.

3. Запусти сбор трассы, выполни команду ping my.site, убедись в том, что имя разрешилось в IP-адрес.

    Подсказка: необходимо добавить loopback-интерфейс для корректного разрешения добавленного DNS-имени в IP.

4. Открой в Wireshark результирующий файл пакетной трассы, отфильтруй пакеты, используя фильтр «dns», и изучи содержимое пакетов. Обрати внимание на то, какие source- и destination-порты используются при DNS-запросах и ответах.

5. Ответь на вопрос:
    - Какие тип и класс запроса видны в DNS-запросе? Ответ запиши в текстовый файл с именем `dns`.

В Wireshark сохрани результирующий pcap-файл с именем `dns`.

В качестве финального ответа загрузи в репозиторий 3 файла: проект gns3, текстовый файл с именем `dns`, pcap-файл с именем `dns`.

Дополнительно при выполнении этого задания рекомендуем изучить понятие иерархии DNS-серверов и типы ресурсных записей в DNS.

### Задание 4. DHCP
Для решения данного задания нужны знания в следующих темах: DHCP, IP-address pool, роутер, Round Robin алгоритм, GNS3, Wireshark.

Задание:
1. Добавь в ранее созданный проект GNS3 объект виртуального ПК (vPC), подключи его к одному из устройств Cisco.

2. Настрой на Cisco интерфейс (с адресацией из сети 10.10.30.0/24), к которому подключен vPC, настрой DHCP-сервер на выдачу 50 IP-адресов из этой же сети.

3. Запусти сбор трассы, настрой на vPC получение IP по DHCP.

4. Выполни с vPC ping до IP-адреса устройства, к которому он подключен.

5. В Wireshark ознакомься с содержимым DHCP- и ICMP-пакетов. Сохрани полученный дамп в файл dhcp.pcap.
6. Ответь на вопросы:
    - Что означает вывод «DORA IP …» при DHCP-запросе — каким DHCP-пакетам из пакетной трассы DORA соответствует?
    - На какой IP-адрес отправляется первый DHCP-пакет?

Ответы запиши в текстовый файл с именем `dhcp`.

По итогу в твоем репозитории должны быть: файл проекта gns3, pcap дамп-трафика `dhcp.pcap`, текстовый файл с ответами на вопросы с именем `dhcp`.

### Задание 5. SSH
Для решения данного задания нужны знания в следующих темах: SSH, RSA-ключи, VTY, TCP-протокол, Wireshark, GNS3.

Выполни следующие задания для знакомства с SSH:
1. Настрой SSH на одном из устройств — в числе прочего необходима настройка VTY, создание пользователя, генерация RSA-ключей.

2. Запусти сбор пакетной трассы, проверь доступность 22-го порта на соседнем устройстве утилитой telnet.

3. Выполни подключение на соседнее устройство по SSH с учетными данными созданного на первом шаге пользователя, после ввода пароля и успешного подключения выполни отключение командой exit.

4. В Wireshark ознакомься с содержимым пакетов запроса telnet и ответного трафика, изучи структуру TCP-пакета, флаги в TCP и последовательность выполнения TCP-handshake.

Сохрани результирующий файл pcap Wireshark с именем `ssh`.

В качестве ответа приложи: файл проекта gns3, pcap-файл с именем `ssh`.
